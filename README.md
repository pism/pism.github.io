# pism.github.io

This repository contains the source code for the new PISM website.

The Jekyll theme was originally forked from the [Bulma Clean Theme](https://github.com/chrisrhymes/bulma-clean-theme) created by C.S. Rhymes.

## Development

We use several Python and Ruby tools to build this website:

- `pybtex` to parse BibTeX files listing publications using PISM
- `matplotlib` to plot the bar graph of the number of PISM
  publications per year (this also uses the *Humor Sans* font)
- `folium` to generate the map of PISM users

Run something like

    pip3 install pybtex matplotlib folium

to install these.

All the Ruby dependencies (too many to list) can be installed by
running

    bundle install

All the common tasks are managed by the `Makefile`.

Run

- `make build` to build the website
- `make serve` to build the website and start the server to view
  results
- `make check-links` to build the website and check internal links
- `make check-external-links` to build the website and check all links
  (including external ones)
- `make install` to install Ruby dependencies
- `make -C docker` to build the Docker image used to build the website
  on CircleCI

### Auto-generated content

The list of PISM applications, the bar graph showing the number of
publications per year, and the map of PISM users are generated using
Python scripts.

See `publications/list_references.py` and
`publications/plot_references.py` for the code responsible for
processing publications.

> Edit `publications/applications.bib` to add more PISM papers.

See `usersmap/create_map.py` for the code generating the map of PISM
users.

> Edit usersmap/pism_users.csv to add more PISM users.

Note that files generated by these scripts should *not* be added to
the repository.
